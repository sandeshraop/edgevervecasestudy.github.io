<section class="auth-hero">
  <div class="container">
    <h1>Change Password</h1>
    <p>HOME / CHANGE PASSWORD</p>
  </div>
</section>

<section class="auth-section section-padding">
  <div class="auth-card">

    <h2>Update Password</h2>

    <div class="error-message" *ngIf="errorMessage">
      {{ errorMessage }}
    </div>

    <div class="success-message" *ngIf="successMessage">
      {{ successMessage }}
    </div>

    <form [formGroup]="changeForm" (ngSubmit)="changePassword()">

      <input 
        type="password" 
        formControlName="currentPassword" 
        placeholder="Current Password"
        [class.invalid]="changeForm.get('currentPassword')?.touched && changeForm.get('currentPassword')?.invalid"
      >

      <div class="error" *ngIf="changeForm.get('currentPassword')?.touched && changeForm.get('currentPassword')?.invalid">
        <small>Current password is required</small>
      </div>

      <input 
        type="password" 
        formControlName="newPassword" 
        placeholder="New Password"
        [class.invalid]="changeForm.get('newPassword')?.touched && changeForm.get('newPassword')?.invalid"
      >

      <div class="error" *ngIf="changeForm.get('newPassword')?.touched && changeForm.get('newPassword')?.invalid">
        <small *ngIf="changeForm.get('newPassword')?.errors?.['required']">New password is required</small>
        <small *ngIf="changeForm.get('newPassword')?.errors?.['minlength']">Password must be at least 6 characters</small>
      </div>

      <input 
        type="password" 
        formControlName="confirmPassword" 
        placeholder="Confirm New Password"
        [class.invalid]="changeForm.get('confirmPassword')?.touched && (changeForm.get('confirmPassword')?.invalid || changeForm.errors?.['mismatch'])"
      >

      <div class="error" *ngIf="changeForm.get('confirmPassword')?.touched && changeForm.get('confirmPassword')?.invalid">
        <small>Please confirm your new password</small>
      </div>

      <div class="error" *ngIf="changeForm.errors?.['mismatch']">
        <small>Passwords do not match</small>
      </div>

      <button 
        type="submit" 
        class="primary-btn full-width"
        [disabled]="loading || changeForm.invalid"
      >
        <span *ngIf="!loading">Change Password</span>
        <span *ngIf="loading">Updating...</span>
      </button>

    </form>

    <div class="form-actions">
      <a routerLink="/profile" class="back-link">‚Üê Back to Profile</a>
    </div>

  </div>
</section>
